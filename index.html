<!DOCTYPE html>
<html>
<head>
    <title>Cross-Domain Form</title>
    <style>
        body { font-family: Arial; max-width: 500px; margin: 2rem auto; padding: 2rem; }
        input, select, textarea, button { width: 100%; padding: 0.75rem; margin: 0.5rem 0; box-sizing: border-box; }
        button { background: #007cba; color: white; border: none; cursor: pointer; }
        button:hover { background: #005a87; }
    </style>
</head>
<body>
    <h2>Cross-Domain Practice Form</h2>
    
    <form id="practice-form">
        <input type="text" 
               id="name" 
               name="name" 
               placeholder="Name" 
               autocomplete="name" 
               required>
        
        <select id="rating" 
                name="rating" 
                autocomplete="rating" 
                required>
            <option value="">Rating</option>
            <option value="5">5 Stars</option>
            <option value="4">4 Stars</option>
            <option value="3">3 Stars</option>
            <option value="2">2 Stars</option>
            <option value="1">1 Star</option>
        </select>
        
        <textarea id="comments" 
                  name="comments" 
                  placeholder="Comments" 
                  autocomplete="off" 
                  rows="4"></textarea>
        
        <button type="submit">Submit (Cross-Domain!)</button>
    </form>

    <!-- ✅ Script AFTER form - DOM ready -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('practice-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    event: 'form_submit',
                    form_name: 'cross_domain_feedback',
                    name: document.getElementById('name').value || 'N/A',
                    rating: document.getElementById('rating').value || 'N/A',
                    comments: document.getElementById('comments').value || 'N/A'
                };
                
                
                // Child: Dynamic parent origin
window.parent.postMessage(formData, window.location !== window.parent.location ? window.parent.location.origin : '*');

                
                alert('✅ Submitted to parent! Check Console/GTM.');
                this.reset();
            });
        });
    </script>
</body>
</html>
